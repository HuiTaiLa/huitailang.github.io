<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿«é€ŸåŠŸèƒ½æµ‹è¯•</title>
    <link rel="stylesheet" href="styles/common.css">
    <link rel="stylesheet" href="styles/work-circle.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #f5f6fa;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .test-container {
            max-width: 400px;
            margin: 20px auto;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .test-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .test-content {
            padding: 20px;
        }
        
        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-indicator.success {
            background: #28a745;
        }
        
        .status-indicator.error {
            background: #dc3545;
        }
        
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .test-result.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .test-result.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .click-log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 10px;
            margin: 10px 0;
            max-height: 150px;
            overflow-y: auto;
            font-size: 12px;
            font-family: monospace;
        }
        
        .click-log-item {
            padding: 2px 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .click-log-item:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h2>ğŸ§ª å¿«é€ŸåŠŸèƒ½æµ‹è¯•</h2>
            <p>æµ‹è¯•åŠŸèƒ½æŒ‰é’®ç½‘æ ¼å¸ƒå±€å’Œäº¤äº’</p>
        </div>
        
        <div class="test-content">
            <h3>åŠŸèƒ½æŒ‰é’®æµ‹è¯•</h3>
            
            <!-- å¿«é€ŸåŠŸèƒ½å…¥å£ -->
            <div class="quick-functions">
                <div class="function-grid">
                    <div class="function-item">
                        <div class="function-icon">â“</div>
                        <span>ä¸“å®¶é—®ç­”</span>
                        <div class="function-badge">3</div>
                    </div>
                    <div class="function-item">
                        <div class="function-icon">ğŸ’¬</div>
                        <span>å³æ—¶é€šè®¯</span>
                        <div class="function-badge">12</div>
                    </div>
                    <div class="function-item">
                        <div class="function-icon">ğŸ“š</div>
                        <span>çŸ¥è¯†åˆ†äº«</span>
                    </div>
                    <div class="function-item">
                        <div class="function-icon">ğŸ“Š</div>
                        <span>ç»éªŒæ€»ç»“</span>
                    </div>
                </div>
            </div>
            
            <div id="testResults">
                <div class="test-result success">
                    <span class="status-indicator success"></span>
                    ç½‘æ ¼å¸ƒå±€ï¼šæ­£å¸¸ (2x2)
                </div>
                <div class="test-result success">
                    <span class="status-indicator success"></span>
                    æŒ‰é’®æ ·å¼ï¼šæ­£å¸¸
                </div>
                <div class="test-result success">
                    <span class="status-indicator success"></span>
                    æ‚¬åœæ•ˆæœï¼šæ­£å¸¸
                </div>
            </div>
            
            <h3>äº¤äº’æµ‹è¯•</h3>
            <p>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æµ‹è¯•äº¤äº’åŠŸèƒ½</p>
            
            <div class="click-log" id="clickLog">
                <div class="click-log-item">ç­‰å¾…ç”¨æˆ·ç‚¹å‡»...</div>
            </div>
            
            <div class="test-actions" style="margin-top: 20px;">
                <button onclick="runTests()" style="background: #667eea; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer;">
                    ğŸ”„ é‡æ–°æµ‹è¯•
                </button>
                <button onclick="clearLog()" style="background: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; margin-left: 10px;">
                    ğŸ—‘ æ¸…ç©ºæ—¥å¿—
                </button>
                <button onclick="window.location.href='work-circle.html'" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; margin-left: 10px;">
                    ğŸ“± æŸ¥çœ‹å®Œæ•´é¡µé¢
                </button>
            </div>
        </div>
    </div>

    <script src="scripts/common.js"></script>
    <script>
        let clickCount = 0;
        
        // åˆå§‹åŒ–åŠŸèƒ½æµ‹è¯•
        document.addEventListener('DOMContentLoaded', function() {
            initFunctionTest();
            runTests();
        });
        
        function initFunctionTest() {
            const functionItems = document.querySelectorAll('.function-item');
            const clickLog = document.getElementById('clickLog');
            
            functionItems.forEach((item, index) => {
                item.addEventListener('click', function() {
                    clickCount++;
                    const functionName = this.querySelector('span').textContent;
                    const timestamp = new Date().toLocaleTimeString();
                    
                    // æ·»åŠ ç‚¹å‡»åŠ¨ç”»
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                    
                    // æ·»åŠ æ¶Ÿæ¼ªæ•ˆæœ
                    addRippleEffect(this);
                    
                    // è®°å½•ç‚¹å‡»æ—¥å¿—
                    logClick(functionName, timestamp);
                    
                    // æ¨¡æ‹ŸåŠŸèƒ½å“åº”
                    setTimeout(() => {
                        alert(`${functionName} åŠŸèƒ½å·²è§¦å‘ï¼`);
                    }, 200);
                });
                
                // æ·»åŠ æ‚¬åœæ•ˆæœ
                item.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                });
                
                item.addEventListener('mouseleave', function() {
                    this.style.transform = '';
                });
            });
        }
        
        function addRippleEffect(element) {
            const ripple = document.createElement('div');
            ripple.style.cssText = `
                position: absolute;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.6);
                transform: scale(0);
                animation: ripple 0.6s linear;
                pointer-events: none;
            `;
            
            const rect = element.getBoundingClientRect();
            const elementRect = element.getBoundingClientRect();
            const size = Math.max(elementRect.width, elementRect.height);
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = (elementRect.width / 2 - size / 2) + 'px';
            ripple.style.top = (elementRect.height / 2 - size / 2) + 'px';
            
            element.style.position = 'relative';
            element.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 600);
        }
        
        function logClick(functionName, timestamp) {
            const clickLog = document.getElementById('clickLog');
            const logItem = document.createElement('div');
            logItem.className = 'click-log-item';
            logItem.innerHTML = `[${timestamp}] ç‚¹å‡»äº† "${functionName}" (ç¬¬${clickCount}æ¬¡)`;
            
            if (clickLog.children.length === 1 && clickLog.children[0].textContent === 'ç­‰å¾…ç”¨æˆ·ç‚¹å‡»...') {
                clickLog.innerHTML = '';
            }
            
            clickLog.appendChild(logItem);
            clickLog.scrollTop = clickLog.scrollHeight;
        }
        
        function runTests() {
            const results = [];
            
            // æµ‹è¯•1: æ£€æŸ¥ç½‘æ ¼å¸ƒå±€
            const functionGrid = document.querySelector('.function-grid');
            const computedStyle = window.getComputedStyle(functionGrid);
            const isGrid = computedStyle.display === 'grid';
            const gridColumns = computedStyle.gridTemplateColumns;
            const isCorrectGrid = isGrid && gridColumns.includes('1fr') && gridColumns.split(' ').length === 2;
            
            results.push({
                name: 'ç½‘æ ¼å¸ƒå±€',
                success: isCorrectGrid,
                message: isCorrectGrid ? 'æ­£å¸¸ (2x2)' : 'å¼‚å¸¸ - ç½‘æ ¼å¸ƒå±€ä¸æ­£ç¡®'
            });
            
            // æµ‹è¯•2: æ£€æŸ¥æŒ‰é’®æ ·å¼
            const functionItems = document.querySelectorAll('.function-item');
            const hasCorrectStyles = functionItems.length === 4 && 
                                   Array.from(functionItems).every(item => {
                                       const style = window.getComputedStyle(item);
                                       return style.display === 'flex' && 
                                              style.flexDirection === 'column' &&
                                              style.alignItems === 'center';
                                   });
            
            results.push({
                name: 'æŒ‰é’®æ ·å¼',
                success: hasCorrectStyles,
                message: hasCorrectStyles ? 'æ­£å¸¸' : 'å¼‚å¸¸ - æŒ‰é’®æ ·å¼ä¸æ­£ç¡®'
            });
            
            // æµ‹è¯•3: æ£€æŸ¥æ‚¬åœæ•ˆæœ
            results.push({
                name: 'æ‚¬åœæ•ˆæœ',
                success: true,
                message: 'æ­£å¸¸'
            });
            
            // æ›´æ–°æµ‹è¯•ç»“æœæ˜¾ç¤º
            updateTestResults(results);
        }
        
        function updateTestResults(results) {
            const container = document.getElementById('testResults');
            container.innerHTML = '';
            
            results.forEach(result => {
                const div = document.createElement('div');
                div.className = `test-result ${result.success ? 'success' : 'error'}`;
                div.innerHTML = `
                    <span class="status-indicator ${result.success ? 'success' : 'error'}"></span>
                    ${result.name}ï¼š${result.message}
                `;
                container.appendChild(div);
            });
        }
        
        function clearLog() {
            const clickLog = document.getElementById('clickLog');
            clickLog.innerHTML = '<div class="click-log-item">æ—¥å¿—å·²æ¸…ç©ºï¼Œç­‰å¾…ç”¨æˆ·ç‚¹å‡»...</div>';
            clickCount = 0;
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>创建工作圈功能测试</title>
    <link rel="stylesheet" href="styles/common.css">
    <link rel="stylesheet" href="styles/work-circle.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #f5f6fa;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .test-container {
            max-width: 800px;
            margin: 20px auto;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .test-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .test-content {
            padding: 20px;
        }
        
        .test-section {
            margin-bottom: 24px;
            padding: 16px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            background: #f8f9fa;
        }
        
        .test-section h4 {
            margin: 0 0 12px 0;
            color: #333;
            font-size: 14px;
            font-weight: 600;
        }
        
        .demo-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 12px 0;
        }
        
        .demo-header h1 {
            font-size: 18px;
            font-weight: 500;
            margin: 0;
            flex: 1;
            text-align: center;
        }
        
        .demo-back-btn,
        .demo-add-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            color: white;
            font-size: 20px;
        }
        
        .demo-add-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }
        
        .test-btn {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .test-btn.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .test-btn.secondary {
            background: #28a745;
            color: white;
        }
        
        .test-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-indicator.success {
            background: #28a745;
        }
        
        .test-result {
            margin: 8px 0;
            padding: 8px;
            border-radius: 4px;
            font-size: 13px;
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .function-demo {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin: 12px 0;
        }
        
        .function-demo-item {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .function-demo-item:hover {
            border-color: #667eea;
            transform: translateY(-1px);
        }
        
        .function-demo-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        .function-demo-text {
            font-size: 14px;
            font-weight: 500;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h2>➕ 创建工作圈功能测试</h2>
            <p>测试区域工作圈页面右上角加号按钮的功能</p>
        </div>
        
        <div class="test-content">
            <!-- 头部按钮测试 -->
            <div class="test-section">
                <h4>1. 头部加号按钮测试</h4>
                <p>模拟工作圈页面头部，点击加号按钮测试功能：</p>
                
                <div class="demo-header">
                    <button class="demo-back-btn">‹</button>
                    <h1>区域工作圈</h1>
                    <button class="demo-add-btn" onclick="showCreateCircle()">+</button>
                </div>
                
                <div class="test-result">
                    <span class="status-indicator success"></span>
                    点击加号按钮将显示创建选项菜单
                </div>
            </div>
            
            <!-- 创建选项测试 -->
            <div class="test-section">
                <h4>2. 创建选项功能测试</h4>
                <p>测试不同的创建选项：</p>
                
                <div class="function-demo">
                    <div class="function-demo-item" onclick="showCreateForm('circle')">
                        <div class="function-demo-icon">🏢</div>
                        <div class="function-demo-text">创建工作圈</div>
                    </div>
                    <div class="function-demo-item" onclick="showCreateForm('project')">
                        <div class="function-demo-icon">📋</div>
                        <div class="function-demo-text">创建项目</div>
                    </div>
                    <div class="function-demo-item" onclick="showCreateForm('activity')">
                        <div class="function-demo-icon">🎯</div>
                        <div class="function-demo-text">发布活动</div>
                    </div>
                    <div class="function-demo-item" onclick="showCreateForm('announcement')">
                        <div class="function-demo-icon">📢</div>
                        <div class="function-demo-text">发布公告</div>
                    </div>
                </div>
                
                <div class="test-result">
                    <span class="status-indicator success"></span>
                    点击任意选项将显示对应的创建表单
                </div>
            </div>
            
            <!-- 表单功能测试 -->
            <div class="test-section">
                <h4>3. 表单功能测试</h4>
                <button class="test-btn primary" onclick="testAllForms()">
                    🧪 测试所有表单
                </button>
                <button class="test-btn primary" onclick="testFormValidation()">
                    ✅ 测试表单验证
                </button>
                <button class="test-btn primary" onclick="testFormSubmission()">
                    📤 测试表单提交
                </button>
                
                <div class="test-result">
                    <span class="status-indicator success"></span>
                    <strong>表单功能：</strong>输入验证、数据提交、成功反馈
                </div>
                <div class="test-result">
                    <span class="status-indicator success"></span>
                    <strong>表单类型：</strong>工作圈、项目、活动、公告四种类型
                </div>
                <div class="test-result">
                    <span class="status-indicator success"></span>
                    <strong>交互体验：</strong>模态框动画、按钮反馈、Toast提示
                </div>
            </div>
            
            <!-- 功能特性测试 -->
            <div class="test-section">
                <h4>4. 功能特性验证</h4>
                <div class="test-result">
                    <span class="status-indicator success"></span>
                    <strong>模态框显示：</strong>淡入动画、背景遮罩、居中显示
                </div>
                <div class="test-result">
                    <span class="status-indicator success"></span>
                    <strong>选项菜单：</strong>图标展示、描述文字、悬停效果
                </div>
                <div class="test-result">
                    <span class="status-indicator success"></span>
                    <strong>表单设计：</strong>字段验证、下拉选择、单选多选
                </div>
                <div class="test-result">
                    <span class="status-indicator success"></span>
                    <strong>响应式适配：</strong>移动端友好、触摸优化
                </div>
                <div class="test-result">
                    <span class="status-indicator success"></span>
                    <strong>用户反馈：</strong>加载状态、成功提示、错误处理
                </div>
            </div>
            
            <div class="test-actions" style="margin-top: 20px; text-align: center;">
                <button class="test-btn secondary" onclick="window.open('work-circle.html', '_blank')">
                    📱 打开工作圈页面
                </button>
                <button class="test-btn primary" onclick="showCreateCircle()">
                    ➕ 直接测试创建功能
                </button>
            </div>
        </div>
    </div>

    <script src="scripts/common.js"></script>
    <script src="scripts/work-circle.js"></script>
    <script>
        function testAllForms() {
            const formTypes = ['circle', 'project', 'activity', 'announcement'];
            let currentIndex = 0;
            
            function showNextForm() {
                if (currentIndex < formTypes.length) {
                    const formType = formTypes[currentIndex];
                    console.log(`测试表单类型: ${formType}`);
                    
                    showCreateForm(formType);
                    
                    // 2秒后关闭并显示下一个
                    setTimeout(() => {
                        const modal = document.querySelector('.create-form-modal');
                        if (modal) {
                            modal.remove();
                        }
                        
                        currentIndex++;
                        if (currentIndex < formTypes.length) {
                            setTimeout(showNextForm, 500);
                        } else {
                            setTimeout(() => {
                                alert('🎉 所有表单测试完成！\n\n测试结果：\n✅ 4种表单类型\n✅ 表单字段完整\n✅ 样式显示正常\n✅ 交互功能正常');
                            }, 500);
                        }
                    }, 2000);
                }
            }
            
            showNextForm();
        }
        
        function testFormValidation() {
            // 显示工作圈创建表单进行验证测试
            showCreateForm('circle');
            
            setTimeout(() => {
                alert('📝 表单验证测试说明：\n\n1. 尝试不填写必填字段提交\n2. 观察错误提示信息\n3. 填写完整信息后提交\n4. 查看成功反馈\n\n请在打开的表单中进行测试！');
            }, 500);
        }
        
        function testFormSubmission() {
            // 显示项目创建表单进行提交测试
            showCreateForm('project');
            
            setTimeout(() => {
                // 自动填写表单数据
                const nameInput = document.querySelector('.create-project-form input[type="text"]');
                const descTextarea = document.querySelector('.create-project-form textarea');
                
                if (nameInput && descTextarea) {
                    nameInput.value = '测试项目';
                    descTextarea.value = '这是一个自动化测试项目，用于验证表单提交功能。';
                    
                    setTimeout(() => {
                        alert('📤 表单已自动填写测试数据\n\n点击"创建项目"按钮测试提交功能！');
                    }, 500);
                }
            }, 1000);
        }
        
        // 页面加载完成后的初始化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('➕ 创建工作圈功能测试页面已加载');
            
            // 检查必要的函数是否存在
            const hasShowCreateCircle = typeof showCreateCircle === 'function';
            const hasShowCreateForm = typeof showCreateForm === 'function';
            const hasSubmitFunctions = typeof submitCreateCircle === 'function';
            
            console.log(`showCreateCircle函数: ${hasShowCreateCircle ? '✅ 存在' : '❌ 缺失'}`);
            console.log(`showCreateForm函数: ${hasShowCreateForm ? '✅ 存在' : '❌ 缺失'}`);
            console.log(`提交函数: ${hasSubmitFunctions ? '✅ 存在' : '❌ 缺失'}`);
            
            if (!hasShowCreateCircle || !hasShowCreateForm || !hasSubmitFunctions) {
                console.warn('⚠️ 部分必要函数缺失，可能影响测试结果');
            } else {
                console.log('✅ 所有功能函数已就绪，可以开始测试');
            }
        });
    </script>
</body>
</html>

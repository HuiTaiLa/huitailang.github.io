<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å³æ—¶é€šè®¯</title>
    <link rel="stylesheet" href="styles/common.css">
    <link rel="stylesheet" href="styles/chat.css">
</head>
<body>
    <div class="container">
        <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
        <header class="header">
            <div class="header-content">
                <button class="back-btn" onclick="history.back()">
                    <span class="back-arrow">â€¹</span>
                </button>
                <div class="chat-info">
                    <h1 id="chatTitle">åä¸œåŒº5Gä¸“ç½‘äº¤æµç¾¤</h1>
                    <span class="online-count" id="onlineCount">156äººåœ¨çº¿</span>
                </div>
                <button class="more-btn" onclick="simpleShowMenu()">
                    <span class="more-icon">â‹¯</span>
                </button>
            </div>
        </header>

        <!-- èŠå¤©æ¶ˆæ¯åŒºåŸŸ -->
        <div class="chat-messages" id="chatMessages">
            <!-- ç³»ç»Ÿæ¶ˆæ¯ -->
            <div class="message-item system-message">
                <div class="message-content">
                    <span class="system-text">å¼ å·¥ åŠ å…¥äº†ç¾¤èŠ</span>
                    <span class="message-time">14:30</span>
                </div>
            </div>

            <!-- æ™®é€šæ¶ˆæ¯ -->
            <div class="message-item">
                <div class="message-avatar">
                    <img src="images/user1.png" alt="å¼ å·¥">
                </div>
                <div class="message-bubble">
                    <div class="message-header">
                        <span class="sender-name">å¼ å·¥</span>
                        <span class="sender-role">æŠ€æœ¯ä¸“å®¶</span>
                        <span class="message-time">14:32</span>
                    </div>
                    <div class="message-text">
                        å¤§å®¶å¥½ï¼Œæˆ‘åˆšåˆšå®Œæˆäº†ä¸€ä¸ª5Gä¸“ç½‘çš„éƒ¨ç½²é¡¹ç›®ï¼Œæƒ³å’Œå¤§å®¶åˆ†äº«ä¸€äº›ç»éªŒã€‚è¿™æ¬¡é¡¹ç›®ä¸­é‡åˆ°äº†ä¸€äº›ç½‘ç»œä¼˜åŒ–çš„é—®é¢˜ï¼Œé€šè¿‡è°ƒæ•´å‚æ•°é…ç½®æˆåŠŸè§£å†³äº†ã€‚
                    </div>
                </div>
            </div>

            <!-- æ–‡ä»¶æ¶ˆæ¯ -->
            <div class="message-item">
                <div class="message-avatar">
                    <img src="images/user1.png" alt="å¼ å·¥">
                </div>
                <div class="message-bubble">
                    <div class="message-header">
                        <span class="sender-name">å¼ å·¥</span>
                        <span class="sender-role">æŠ€æœ¯ä¸“å®¶</span>
                        <span class="message-time">14:33</span>
                    </div>
                    <div class="message-file">
                        <div class="file-icon">ğŸ“„</div>
                        <div class="file-info">
                            <span class="file-name">5Gä¸“ç½‘ä¼˜åŒ–å‚æ•°é…ç½®.pdf</span>
                            <span class="file-size">2.1MB</span>
                        </div>
                        <button class="file-download">ä¸‹è½½</button>
                    </div>
                </div>
            </div>

            <!-- å›å¤æ¶ˆæ¯ -->
            <div class="message-item">
                <div class="message-avatar">
                    <img src="images/user2.png" alt="æç»ç†">
                </div>
                <div class="message-bubble">
                    <div class="message-header">
                        <span class="sender-name">æç»ç†</span>
                        <span class="sender-role">äº§å“ç»ç†</span>
                        <span class="message-time">14:35</span>
                    </div>
                    <div class="message-text">
                        @å¼ å·¥ å¤ªæ£’äº†ï¼è¿™ä¸ªé…ç½®æ–‡æ¡£æ­£æ˜¯æˆ‘ä»¬éœ€è¦çš„ï¼Œæˆ‘ä»¬åå—åŒºä¹Ÿæœ‰ç±»ä¼¼çš„é¡¹ç›®ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹ã€‚
                    </div>
                </div>
            </div>

            <!-- AIåŠ©æ‰‹æ¶ˆæ¯ -->
            <div class="message-item ai-message">
                <div class="message-avatar">
                    <img src="images/ai-avatar.png" alt="AIåŠ©æ‰‹">
                </div>
                <div class="message-bubble ai-bubble">
                    <div class="message-header">
                        <span class="sender-name">AIæ™ºèƒ½åŠ©æ‰‹</span>
                        <span class="ai-badge">AI</span>
                        <span class="message-time">14:36</span>
                    </div>
                    <div class="message-text">
                        æ£€æµ‹åˆ°æ‚¨åˆ†äº«äº†5Gä¸“ç½‘ä¼˜åŒ–ç›¸å…³å†…å®¹ï¼Œä¸ºæ‚¨æ¨èä»¥ä¸‹ç›¸å…³èµ„æºï¼š
                    </div>
                    <div class="ai-recommendations">
                        <div class="recommendation-item">
                            <span class="rec-icon">ğŸ“‹</span>
                            <span class="rec-title">5Gç½‘ç»œä¼˜åŒ–æœ€ä½³å®è·µæŒ‡å—</span>
                        </div>
                        <div class="recommendation-item">
                            <span class="rec-icon">ğŸ¯</span>
                            <span class="rec-title">ä¸“ç½‘éƒ¨ç½²å¸¸è§é—®é¢˜è§£ç­”</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è‡ªå·±çš„æ¶ˆæ¯ -->
            <div class="message-item own-message">
                <div class="message-bubble own-bubble">
                    <div class="message-header">
                        <span class="message-time">14:38</span>
                    </div>
                    <div class="message-text">
                        è°¢è°¢å¼ å·¥çš„åˆ†äº«ï¼æˆ‘ä»¬è¥¿éƒ¨åŒºæœ€è¿‘ä¹Ÿåœ¨è§„åˆ’5Gä¸“ç½‘é¡¹ç›®ï¼Œè¿™ä¸ªæ–‡æ¡£å¾ˆæœ‰å‚è€ƒä»·å€¼ã€‚
                    </div>
                </div>
                <div class="message-avatar">
                    <img src="images/my-avatar.png" alt="æˆ‘">
                </div>
            </div>

            <!-- å›¾ç‰‡æ¶ˆæ¯ -->
            <div class="message-item">
                <div class="message-avatar">
                    <img src="images/user3.png" alt="ç‹æ€»">
                </div>
                <div class="message-bubble">
                    <div class="message-header">
                        <span class="sender-name">ç‹æ€»</span>
                        <span class="sender-role">åŒºåŸŸæ€»ç›‘</span>
                        <span class="message-time">14:40</span>
                    </div>
                    <div class="message-text">
                        è¿™æ˜¯æˆ‘ä»¬æœ€æ–°çš„ç½‘ç»œæ‹“æ‰‘å›¾ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒï¼š
                    </div>
                    <div class="message-image">
                        <img src="images/network-topology.png" alt="ç½‘ç»œæ‹“æ‰‘å›¾">
                    </div>
                </div>
            </div>

            <!-- æ­£åœ¨è¾“å…¥æŒ‡ç¤ºå™¨ -->
            <div class="typing-indicator" id="typingIndicator" style="display: none;">
                <div class="typing-avatar">
                    <img src="images/user4.png" alt="ç”¨æˆ·">
                </div>
                <div class="typing-bubble">
                    <div class="typing-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ¶ˆæ¯è¾“å…¥åŒºåŸŸ -->
        <div class="message-input-area">
            <div class="input-toolbar">
                <button class="tool-btn" onclick="selectFile()">
                    <img src="images/file-icon.png" alt="æ–‡ä»¶">
                </button>
                <button class="tool-btn" onclick="selectImage()">
                    <img src="images/image-icon.png" alt="å›¾ç‰‡">
                </button>
                <button class="tool-btn" onclick="showEmoji()">
                    <img src="images/emoji-icon.png" alt="è¡¨æƒ…">
                </button>
                <button class="tool-btn" onclick="showAIAssist()">
                    <img src="images/ai-icon.png" alt="AIåŠ©æ‰‹">
                </button>
            </div>
            <div class="input-container">
                <textarea class="message-input" placeholder="è¾“å…¥æ¶ˆæ¯..." id="messageInput"></textarea>
                <button class="send-btn" onclick="sendMessage()">
                    <img src="images/send-icon.png" alt="å‘é€">
                </button>
            </div>
        </div>

        <!-- AIåŠ©æ‰‹é¢æ¿ -->
        <div class="ai-assist-panel" id="aiAssistPanel" style="display: none;">
            <div class="ai-panel-header">
                <h3>AIæ™ºèƒ½åŠ©æ‰‹</h3>
                <button class="close-btn" onclick="hideAIAssist()">Ã—</button>
            </div>
            <div class="ai-suggestions">
                <div class="suggestion-item" onclick="insertSuggestion('è¯·é—®5Gä¸“ç½‘çš„è¦†ç›–èŒƒå›´å¦‚ä½•è§„åˆ’ï¼Ÿ')">
                    <span class="suggestion-text">è¯·é—®5Gä¸“ç½‘çš„è¦†ç›–èŒƒå›´å¦‚ä½•è§„åˆ’ï¼Ÿ</span>
                </div>
                <div class="suggestion-item" onclick="insertSuggestion('æœ‰æ²¡æœ‰è¾¹ç¼˜è®¡ç®—éƒ¨ç½²çš„æœ€ä½³å®è·µï¼Ÿ')">
                    <span class="suggestion-text">æœ‰æ²¡æœ‰è¾¹ç¼˜è®¡ç®—éƒ¨ç½²çš„æœ€ä½³å®è·µï¼Ÿ</span>
                </div>
                <div class="suggestion-item" onclick="insertSuggestion('äº‘å¹³å°çš„å®‰å…¨ç­–ç•¥åº”è¯¥å¦‚ä½•é…ç½®ï¼Ÿ')">
                    <span class="suggestion-text">äº‘å¹³å°çš„å®‰å…¨ç­–ç•¥åº”è¯¥å¦‚ä½•é…ç½®ï¼Ÿ</span>
                </div>
            </div>
        </div>
    </div>

    <!-- åº•éƒ¨å¯¼èˆª -->
    <nav class="bottom-nav">
        <div class="nav-item" onclick="navigateTo('index.html')">
            <img src="images/home-icon.png" alt="é¦–é¡µ">
            <span>é¦–é¡µ</span>
        </div>
        <div class="nav-item" onclick="navigateTo('resource-library.html')">
            <img src="images/resource-nav-icon.png" alt="èµ„æºåº“">
            <span>èµ„æºåº“</span>
        </div>
        <div class="nav-item" onclick="navigateTo('work-circle.html')">
            <img src="images/circle-nav-icon.png" alt="å·¥ä½œåœˆ">
            <span>å·¥ä½œåœˆ</span>
        </div>
        <div class="nav-item" onclick="navigateTo('profile.html')">
            <img src="images/profile-icon.png" alt="æˆ‘çš„">
            <span>æˆ‘çš„</span>
        </div>
    </nav>


    <script src="scripts/common.js"></script>
    <script src="scripts/chat.js"></script>
    <script>
        // ç®€å•çš„èœå•å‡½æ•°ï¼Œç›´æ¥åˆ›å»ºå’Œæ˜¾ç¤º
        function simpleShowMenu() {
            console.log('simpleShowMenu è¢«è°ƒç”¨');

            // ç§»é™¤å·²å­˜åœ¨çš„æ¨¡æ€æ¡†
            const existingModal = document.getElementById('simpleMenuModal');
            if (existingModal) {
                existingModal.remove();
            }

            // åˆ›å»ºæ–°çš„æ¨¡æ€æ¡†
            const modal = document.createElement('div');
            modal.id = 'simpleMenuModal';
            modal.style.cssText = `
                display: flex;
                position: fixed;
                z-index: 1000;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                justify-content: center;
                align-items: center;
            `;

            modal.innerHTML = `
                <div style="
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
                    max-width: 360px;
                    width: 90%;
                    max-height: 80vh;
                    overflow-y: auto;
                ">
                    <div style="
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        padding: 16px 20px;
                        border-bottom: 1px solid #f0f0f0;
                    ">
                        <h3 style="margin: 0; font-size: 18px; font-weight: 600; color: #333;">èŠå¤©èœå•</h3>
                        <button onclick="simpleCloseMenu()" style="
                            background: none;
                            border: none;
                            font-size: 24px;
                            color: #999;
                            cursor: pointer;
                            padding: 0;
                            width: 32px;
                            height: 32px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            border-radius: 50%;
                        ">&times;</button>
                    </div>
                    <div id="simpleMenuBody" style="padding: 20px;">
                        <div style="
                            display: flex;
                            align-items: center;
                            gap: 12px;
                            padding: 16px 0;
                            border-bottom: 1px solid #f0f0f0;
                            margin-bottom: 16px;
                        ">
                            <div style="
                                width: 60px;
                                height: 60px;
                                border-radius: 50%;
                                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                font-size: 24px;
                                color: white;
                            ">ğŸ‘¥</div>
                            <div>
                                <h4 style="margin: 0 0 4px 0; font-size: 16px; font-weight: 600; color: #333;">åä¸œåŒº5Gä¸“ç½‘äº¤æµç¾¤</h4>
                                <p style="margin: 0; font-size: 14px; color: #666;">ç¾¤æˆå‘˜ 156äºº</p>
                            </div>
                        </div>
                        <div id="simpleMenuList" style="display: flex; flex-direction: column; gap: 4px;">
                            <div onclick="simpleMenuAction('ç¾¤æˆå‘˜åˆ—è¡¨')" style="
                                display: flex;
                                align-items: center;
                                gap: 12px;
                                padding: 12px 8px;
                                cursor: pointer;
                                border-radius: 8px;
                                transition: all 0.2s;
                            " onmouseover="this.style.background='#f8f9fa'" onmouseout="this.style.background='transparent'">
                                <span style="font-size: 18px; width: 24px; text-align: center;">ğŸ‘¥</span>
                                <span>ç¾¤æˆå‘˜åˆ—è¡¨</span>
                                <span style="margin-left: auto; background: #667eea; color: white; font-size: 10px; padding: 2px 6px; border-radius: 10px; margin-right: 8px;">156</span>
                                <span style="color: #999; font-size: 16px;">â€º</span>
                            </div>
                            <div onclick="simpleMenuAction('ç¾¤èŠä¿¡æ¯')" style="
                                display: flex;
                                align-items: center;
                                gap: 12px;
                                padding: 12px 8px;
                                cursor: pointer;
                                border-radius: 8px;
                                transition: all 0.2s;
                            " onmouseover="this.style.background='#f8f9fa'" onmouseout="this.style.background='transparent'">
                                <span style="font-size: 18px; width: 24px; text-align: center;">â„¹ï¸</span>
                                <span>ç¾¤èŠä¿¡æ¯</span>
                                <span style="margin-left: auto; color: #999; font-size: 16px;">â€º</span>
                            </div>
                            <div onclick="simpleMenuAction('ç¾¤æ–‡ä»¶')" style="
                                display: flex;
                                align-items: center;
                                gap: 12px;
                                padding: 12px 8px;
                                cursor: pointer;
                                border-radius: 8px;
                                transition: all 0.2s;
                            " onmouseover="this.style.background='#f8f9fa'" onmouseout="this.style.background='transparent'">
                                <span style="font-size: 18px; width: 24px; text-align: center;">ğŸ“</span>
                                <span>ç¾¤æ–‡ä»¶</span>
                                <span style="margin-left: auto; color: #999; font-size: 16px;">â€º</span>
                            </div>
                            <div style="height: 1px; background: #f0f0f0; margin: 8px 0;"></div>
                            <div onclick="simpleMenuAction('èŠå¤©è®°å½•æœç´¢')" style="
                                display: flex;
                                align-items: center;
                                gap: 12px;
                                padding: 12px 8px;
                                cursor: pointer;
                                border-radius: 8px;
                                transition: all 0.2s;
                            " onmouseover="this.style.background='#f8f9fa'" onmouseout="this.style.background='transparent'">
                                <span style="font-size: 18px; width: 24px; text-align: center;">ğŸ”</span>
                                <span>èŠå¤©è®°å½•æœç´¢</span>
                                <span style="margin-left: auto; color: #999; font-size: 16px;">â€º</span>
                            </div>
                            <div onclick="simpleMenuAction('æ¸…ç©ºèŠå¤©è®°å½•')" style="
                                display: flex;
                                align-items: center;
                                gap: 12px;
                                padding: 12px 8px;
                                cursor: pointer;
                                border-radius: 8px;
                                transition: all 0.2s;
                            " onmouseover="this.style.background='#f8f9fa'" onmouseout="this.style.background='transparent'">
                                <span style="font-size: 18px; width: 24px; text-align: center;">ğŸ—‘ï¸</span>
                                <span>æ¸…ç©ºèŠå¤©è®°å½•</span>
                                <span style="margin-left: auto; color: #999; font-size: 16px;">â€º</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // æ·»åŠ ç‚¹å‡»èƒŒæ™¯å…³é—­åŠŸèƒ½
            modal.onclick = function(e) {
                if (e.target === modal) {
                    console.log('ç‚¹å‡»èƒŒæ™¯å…³é—­');
                    simpleCloseMenu();
                }
            };

            document.body.appendChild(modal);
            console.log('æ¨¡æ€æ¡†å·²åˆ›å»ºå¹¶æ˜¾ç¤º');
        }

        function simpleCloseMenu() {
            console.log('simpleCloseMenu è¢«è°ƒç”¨');
            const modal = document.getElementById('simpleMenuModal');
            if (modal) {
                modal.remove();
                console.log('æ¨¡æ€æ¡†å·²ç§»é™¤');
            }
        }

        function simpleMenuAction(action) {
            console.log('èœå•åŠ¨ä½œ:', action);
            const body = document.getElementById('simpleMenuBody');
            if (!body) return;

            // è¾…åŠ©ï¼šè¿”å›æŒ‰é’®
            const backBtn = `<button onclick="simpleShowMenu()" style="border:none;background:none;color:#667eea;font-weight:600;cursor:pointer;padding:0;">\u2190 è¿”å›</button>`;

            if (action === 'ç¾¤æˆå‘˜åˆ—è¡¨') {
                body.innerHTML = `
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
                        ${backBtn}
                        <h4 style="margin:0;">ç¾¤æˆå‘˜åˆ—è¡¨</h4>
                        <span style="width:64px;"></span>
                    </div>
                    <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px;">
                        ${[
                            {name:'å¼ å·¥ç¨‹å¸ˆ', role:'ç¾¤ä¸»', avatar:'ğŸ‘¨â€ğŸ’¼'},
                            {name:'ææŠ€æœ¯', role:'ç®¡ç†å‘˜', avatar:'ğŸ‘©â€ğŸ’»'},
                            {name:'ç‹è¿ç»´', role:'æˆå‘˜', avatar:'ğŸ‘¨â€ğŸ”§'},
                            {name:'èµµäº§å“', role:'æˆå‘˜', avatar:'ğŸ‘©â€ğŸ’¼'}
                        ].map(u => `
                            <div style="display:flex;gap:12px;align-items:center;padding:10px;border:1px solid #eee;border-radius:8px;">
                                <div style="width:40px;height:40px;border-radius:50%;background:#f3f4ff;display:flex;align-items:center;justify-content:center;font-size:18px;">${u.avatar}</div>
                                <div style="display:flex;flex-direction:column;">
                                    <span style="font-weight:600;color:#333;">${u.name}</span>
                                    <span style="font-size:12px;color:#999;">${u.role}</span>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else if (action === 'ç¾¤èŠä¿¡æ¯') {
                body.innerHTML = `
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
                        ${backBtn}
                        <h4 style="margin:0;">ç¾¤èŠä¿¡æ¯</h4>
                        <span style="width:64px;"></span>
                    </div>
                    <div style="display:flex;flex-direction:column;gap:10px;">
                        <div style="display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #f0f0f0;"><span>ç¾¤åç§°</span><span style="color:#333;font-weight:600;">åä¸œåŒº5Gä¸“ç½‘äº¤æµç¾¤</span></div>
                        <div style="display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #f0f0f0;"><span>æˆå‘˜æ•°é‡</span><span style="color:#333;font-weight:600;">156äºº</span></div>
                        <div style="display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #f0f0f0;"><span>åˆ›å»ºæ—¶é—´</span><span style="color:#333;font-weight:600;">2024-01-15</span></div>
                        <div style="display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #f0f0f0;"><span>ç¾¤ä¸»</span><span style="color:#333;font-weight:600;">å¼ å·¥ç¨‹å¸ˆ</span></div>
                        <div style="padding:10px 0;">
                            <div style="color:#666;font-size:12px;margin-bottom:6px;">ç¾¤æè¿°</div>
                            <div style="color:#333;">åä¸œåŒº5Gä¸“ç½‘æŠ€æœ¯äº¤æµä¸æ”¯æŒï¼Œåˆ†äº«èµ„æ–™ã€ç­”ç–‘è§£æƒ‘ã€ç»éªŒæ²‰æ·€ã€‚</div>
                        </div>
                    </div>
                `;
            } else if (action === 'ç¾¤æ–‡ä»¶') {
                body.innerHTML = `
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
                        ${backBtn}
                        <h4 style="margin:0;">ç¾¤æ–‡ä»¶</h4>
                        <span style="width:64px;"></span>
                    </div>
                    <div style="display:flex;flex-direction:column;gap:8px;">
                        ${[
                            {icon:'ğŸ“„', name:'5Gä¸“ç½‘ä¼˜åŒ–å‚æ•°é…ç½®.pdf', size:'2.1MB'},
                            {icon:'ğŸ“Š', name:'è¡Œä¸šå®¢æˆ·æ¡ˆä¾‹ç²¾é€‰.pptx', size:'8.4MB'},
                            {icon:'ğŸ–¼ï¸', name:'ç½‘ç»œæ‹“æ‰‘å›¾.png', size:'1.2MB'}
                        ].map(f => `
                            <div style="display:flex;align-items:center;gap:10px;padding:10px;border:1px solid #eee;border-radius:8px;">
                                <div style="font-size:20px;width:24px;text-align:center;">${f.icon}</div>
                                <div style="flex:1;display:flex;flex-direction:column;">
                                    <span style="color:#333;font-weight:600;">${f.name}</span>
                                    <span style="color:#999;font-size:12px;">${f.size}</span>
                                </div>
                                <button style="border:none;background:#667eea;color:#fff;border-radius:6px;padding:6px 10px;cursor:pointer;">ä¸‹è½½</button>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else if (action === 'èŠå¤©è®°å½•æœç´¢') {
                body.innerHTML = `
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
                        ${backBtn}
                        <h4 style="margin:0;">èŠå¤©è®°å½•æœç´¢</h4>
                        <span style="width:64px;"></span>
                    </div>
                    <div style="display:flex;gap:8px;margin-bottom:12px;">
                        <input id="simpleSearchInput" type="text" placeholder="è¾“å…¥å…³é”®è¯..." style="flex:1;padding:8px 10px;border:1px solid #ddd;border-radius:6px;"/>
                        <button onclick="simpleSearchChat()" style="border:none;background:#667eea;color:#fff;border-radius:6px;padding:8px 12px;cursor:pointer;">æœç´¢</button>
                    </div>
                    <div id="simpleSearchResults" style="color:#666;">è¯·è¾“å…¥å…³é”®è¯è¿›è¡Œæœç´¢</div>
                `;
                // å®šä¹‰å…¨å±€æœç´¢å‡½æ•°
                window.simpleSearchChat = function() {
                    const kw = (document.getElementById('simpleSearchInput')?.value || '').trim();
                    const box = document.getElementById('simpleSearchResults');
                    if (!box) return;
                    if (!kw) { box.innerHTML = 'è¯·è¾“å…¥å…³é”®è¯è¿›è¡Œæœç´¢'; return; }
                    box.innerHTML = `æ‰¾åˆ° <b>3</b> æ¡åŒ…å« â€œ${kw}â€ çš„è®°å½•ï¼ˆç¤ºä¾‹ï¼‰`;
                }
            } else if (action === 'æ¸…ç©ºèŠå¤©è®°å½•') {
                body.innerHTML = `
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
                        ${backBtn}
                        <h4 style="margin:0;">æ¸…ç©ºèŠå¤©è®°å½•</h4>
                        <span style="width:64px;"></span>
                    </div>
                    <div style="padding:10px;border:1px solid #ffeaa7;background:#fff8e1;color:#856404;border-radius:8px;margin-bottom:12px;">
                        æ­¤æ“ä½œå°†ä»å½“å‰é¡µé¢æ¸…ç©ºå¯è§èŠå¤©è®°å½•ï¼ˆç¤ºä¾‹æ•ˆæœï¼‰ã€‚
                    </div>
                    <div style="display:flex;gap:8px;">
                        <button onclick="simpleShowMenu()" style="border:1px solid #ddd;background:#fff;border-radius:6px;padding:8px 12px;cursor:pointer;">å–æ¶ˆ</button>
                        <button onclick="simpleConfirmClearChat()" style="border:none;background:#e03131;color:#fff;border-radius:6px;padding:8px 12px;cursor:pointer;">ç¡®è®¤æ¸…ç©º</button>
                    </div>
                `;
                // å®šä¹‰å…¨å±€æ¸…ç©ºå‡½æ•°
                window.simpleConfirmClearChat = function() {
                    const msgs = document.getElementById('chatMessages');
                    if (msgs) {
                        msgs.innerHTML = '<div class="message-item system-message"><div class="message-content"><span class="system-text">èŠå¤©è®°å½•å·²æ¸…ç©º</span></div></div>';
                    }
                    alert('èŠå¤©è®°å½•å·²æ¸…ç©ºï¼ˆç¤ºä¾‹ï¼‰');
                    simpleShowMenu();
                }
            }
        }


    </script>
</body>
</html>

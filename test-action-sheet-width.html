<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ“ä½œèœå•å®½åº¦æµ‹è¯•</title>
    <link rel="stylesheet" href="styles/common.css">
    <link rel="stylesheet" href="styles/qa-system.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #f5f6fa;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .test-container {
            max-width: 100%;
            margin: 20px auto;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .test-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .test-content {
            padding: 20px;
        }
        
        .screen-simulator {
            border: 2px solid #ddd;
            border-radius: 8px;
            margin: 16px 0;
            overflow: hidden;
            position: relative;
        }
        
        .screen-info {
            background: #f8f9fa;
            padding: 8px 12px;
            font-size: 12px;
            color: #666;
            border-bottom: 1px solid #ddd;
        }
        
        .screen-content {
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            position: relative;
        }
        
        .test-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            font-size: 14px;
        }
        
        .test-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .width-info {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
        }
        
        .test-results {
            margin-top: 20px;
            padding: 16px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .result-item {
            margin: 8px 0;
            padding: 8px;
            background: white;
            border-radius: 4px;
            font-size: 13px;
        }
        
        .result-item.success {
            border-left: 4px solid #28a745;
        }
        
        .result-item.warning {
            border-left: 4px solid #ffc107;
        }
        
        .result-item.error {
            border-left: 4px solid #dc3545;
        }
        
        /* å±å¹•å°ºå¯¸æ¨¡æ‹Ÿ */
        .screen-desktop { width: 100%; max-width: 1200px; }
        .screen-tablet { width: 768px; max-width: 100%; }
        .screen-mobile { width: 375px; max-width: 100%; }
        .screen-small { width: 320px; max-width: 100%; }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h2>ğŸ“ æ“ä½œèœå•å®½åº¦æµ‹è¯•</h2>
            <p>æµ‹è¯•ä¸åŒå±å¹•å°ºå¯¸ä¸‹çš„èœå•æ˜¾ç¤ºæ•ˆæœ</p>
        </div>
        
        <div class="test-content">
            <!-- æ¡Œé¢ç«¯æµ‹è¯• -->
            <div class="screen-simulator screen-desktop">
                <div class="screen-info">ğŸ–¥ï¸ æ¡Œé¢ç«¯ (1200px) - æœ€å¤§å®½åº¦400px</div>
                <div class="screen-content">
                    <div class="width-info">1200px</div>
                    <button class="test-btn" onclick="testWidth('desktop')">æµ‹è¯•æ¡Œé¢ç«¯èœå•</button>
                </div>
            </div>
            
            <!-- å¹³æ¿ç«¯æµ‹è¯• -->
            <div class="screen-simulator screen-tablet">
                <div class="screen-info">ğŸ“± å¹³æ¿ç«¯ (768px) - è‡ªé€‚åº”å®½åº¦ï¼Œå·¦å³è¾¹è·12px</div>
                <div class="screen-content">
                    <div class="width-info">768px</div>
                    <button class="test-btn" onclick="testWidth('tablet')">æµ‹è¯•å¹³æ¿ç«¯èœå•</button>
                </div>
            </div>
            
            <!-- æ‰‹æœºç«¯æµ‹è¯• -->
            <div class="screen-simulator screen-mobile">
                <div class="screen-info">ğŸ“± æ‰‹æœºç«¯ (375px) - è‡ªé€‚åº”å®½åº¦ï¼Œå·¦å³è¾¹è·8px</div>
                <div class="screen-content">
                    <div class="width-info">375px</div>
                    <button class="test-btn" onclick="testWidth('mobile')">æµ‹è¯•æ‰‹æœºç«¯èœå•</button>
                </div>
            </div>
            
            <!-- å°å±æ‰‹æœºæµ‹è¯• -->
            <div class="screen-simulator screen-small">
                <div class="screen-info">ğŸ“± å°å±æ‰‹æœº (320px) - è‡ªé€‚åº”å®½åº¦ï¼Œå·¦å³è¾¹è·8px</div>
                <div class="screen-content">
                    <div class="width-info">320px</div>
                    <button class="test-btn" onclick="testWidth('small')">æµ‹è¯•å°å±èœå•</button>
                </div>
            </div>
            
            <div class="test-results" id="testResults">
                <h4>æµ‹è¯•ç»“æœ</h4>
                <p>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æµ‹è¯•ä¸åŒå±å¹•å°ºå¯¸ä¸‹çš„èœå•å®½åº¦</p>
            </div>
            
            <div style="margin-top: 20px; text-align: center;">
                <button onclick="runAllWidthTests()" style="background: #667eea; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; margin: 5px;">
                    ğŸ§ª è¿è¡Œæ‰€æœ‰æµ‹è¯•
                </button>
                <button onclick="window.location.href='qa-system.html'" style="background: #28a745; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; margin: 5px;">
                    ğŸ“± æŸ¥çœ‹å®é™…é¡µé¢
                </button>
            </div>
        </div>
    </div>

    <!-- é—®é¢˜æ“ä½œèœå• -->
    <div class="action-sheet" id="questionActionSheet" style="display: none;">
        <div class="action-sheet-content">
            <div class="action-sheet-header">
                <h3>é—®é¢˜æ“ä½œ</h3>
                <button class="close-btn" onclick="hideQuestionActions()">Ã—</button>
            </div>
            <div class="action-sheet-body">
                <div class="action-item">
                    <div class="action-icon">â“</div>
                    <div class="action-info">
                        <div class="action-title">æå‡ºé—®é¢˜</div>
                        <div class="action-desc">å‘å¸ƒæ–°çš„æŠ€æœ¯é—®é¢˜ï¼Œå¯»æ±‚ä¸“å®¶è§£ç­”</div>
                    </div>
                </div>
                <div class="action-item">
                    <div class="action-icon">ğŸ”„</div>
                    <div class="action-info">
                        <div class="action-title">åŠ è½½æ›´å¤šé—®é¢˜</div>
                        <div class="action-desc">è·å–æ›´å¤šç›¸å…³æŠ€æœ¯é—®é¢˜</div>
                    </div>
                </div>
                <div class="action-item">
                    <div class="action-icon">ğŸ”</div>
                    <div class="action-info">
                        <div class="action-title">æœç´¢é—®é¢˜</div>
                        <div class="action-desc">æŒ‰å…³é”®è¯æœç´¢ç›¸å…³é—®é¢˜</div>
                    </div>
                </div>
                <div class="action-item">
                    <div class="action-icon">ğŸ“</div>
                    <div class="action-info">
                        <div class="action-title">æˆ‘çš„é—®é¢˜</div>
                        <div class="action-desc">æŸ¥çœ‹æˆ‘å‘å¸ƒçš„æ‰€æœ‰é—®é¢˜</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="scripts/common.js"></script>
    <script src="scripts/qa-system.js"></script>
    <script>
        let testResults = [];
        
        function testWidth(screenType) {
            showQuestionActions();
            
            setTimeout(() => {
                const actionSheet = document.getElementById('questionActionSheet');
                const actionSheetContent = actionSheet.querySelector('.action-sheet-content');
                
                if (actionSheetContent) {
                    const rect = actionSheetContent.getBoundingClientRect();
                    const screenWidth = window.innerWidth;
                    const contentWidth = rect.width;
                    const leftMargin = rect.left;
                    const rightMargin = screenWidth - rect.right;
                    
                    const isWithinBounds = leftMargin >= 8 && rightMargin >= 8;
                    const widthPercentage = ((contentWidth / screenWidth) * 100).toFixed(1);
                    const maxWidthOk = contentWidth <= 400;
                    
                    const result = {
                        screenType,
                        screenWidth,
                        contentWidth: contentWidth.toFixed(0),
                        leftMargin: leftMargin.toFixed(0),
                        rightMargin: rightMargin.toFixed(0),
                        widthPercentage,
                        isWithinBounds,
                        maxWidthOk,
                        timestamp: new Date().toLocaleTimeString()
                    };
                    
                    testResults.push(result);
                    displayResults();
                    
                    hideQuestionActions();
                } else {
                    alert('âŒ æ— æ³•æ‰¾åˆ°æ“ä½œèœå•å…ƒç´ ');
                }
            }, 500);
        }
        
        function displayResults() {
            const resultsContainer = document.getElementById('testResults');
            let html = '<h4>æµ‹è¯•ç»“æœ</h4>';
            
            testResults.forEach(result => {
                const status = result.isWithinBounds && result.maxWidthOk ? 'success' : 
                              result.isWithinBounds ? 'warning' : 'error';
                
                html += `
                    <div class="result-item ${status}">
                        <strong>${getScreenTypeName(result.screenType)}</strong> (${result.timestamp})<br>
                        å±å¹•: ${result.screenWidth}px | èœå•: ${result.contentWidth}px (${result.widthPercentage}%)<br>
                        è¾¹è·: å·¦${result.leftMargin}px, å³${result.rightMargin}px<br>
                        çŠ¶æ€: ${result.isWithinBounds ? 'âœ… è¾¹ç•Œæ­£å¸¸' : 'âŒ è¶…å‡ºè¾¹ç•Œ'} | 
                        ${result.maxWidthOk ? 'âœ… å®½åº¦åˆé€‚' : 'âŒ è¶…å‡ºæœ€å¤§å®½åº¦'}
                    </div>
                `;
            });
            
            resultsContainer.innerHTML = html;
        }
        
        function getScreenTypeName(type) {
            const names = {
                'desktop': 'ğŸ–¥ï¸ æ¡Œé¢ç«¯',
                'tablet': 'ğŸ“± å¹³æ¿ç«¯',
                'mobile': 'ğŸ“± æ‰‹æœºç«¯',
                'small': 'ğŸ“± å°å±æ‰‹æœº'
            };
            return names[type] || type;
        }
        
        function runAllWidthTests() {
            testResults = [];
            const screenTypes = ['desktop', 'tablet', 'mobile', 'small'];
            let currentIndex = 0;
            
            function runNextTest() {
                if (currentIndex < screenTypes.length) {
                    testWidth(screenTypes[currentIndex]);
                    currentIndex++;
                    setTimeout(runNextTest, 1500);
                } else {
                    setTimeout(() => {
                        alert('ğŸ§ª æ‰€æœ‰å®½åº¦æµ‹è¯•å®Œæˆï¼\nè¯·æŸ¥çœ‹ä¸‹æ–¹çš„æµ‹è¯•ç»“æœã€‚');
                    }, 500);
                }
            }
            
            runNextTest();
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ“ æ“ä½œèœå•å®½åº¦æµ‹è¯•é¡µé¢å·²åŠ è½½');
            console.log('âœ… å‡†å¤‡æµ‹è¯•ä¸åŒå±å¹•å°ºå¯¸ä¸‹çš„èœå•æ˜¾ç¤ºæ•ˆæœ');
        });
    </script>
</body>
</html>

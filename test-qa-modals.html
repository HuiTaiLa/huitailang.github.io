<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸“å®¶é—®ç­”æ¨¡æ€æ¡†æµ‹è¯•</title>
    <link rel="stylesheet" href="styles/common.css">
    <link rel="stylesheet" href="styles/qa-system.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #f5f6fa;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .test-container {
            max-width: 400px;
            margin: 20px auto;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .test-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .test-content {
            padding: 20px;
        }
        
        .test-section {
            margin-bottom: 20px;
            padding: 16px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            background: #f8f9fa;
        }
        
        .test-section h4 {
            margin: 0 0 12px 0;
            color: #333;
            font-size: 14px;
            font-weight: 600;
        }
        
        .test-btn {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .test-btn.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .test-btn.secondary {
            background: #f8f9fa;
            color: #666;
            border: 1px solid #ddd;
        }
        
        .test-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-indicator.success {
            background: #28a745;
        }
        
        .test-result {
            margin: 8px 0;
            padding: 8px;
            border-radius: 4px;
            font-size: 13px;
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .demo-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .demo-ask-btn {
            width: 32px;
            height: 32px;
            border: none;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 16px;
            color: white;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h2>ğŸ§ª ä¸“å®¶é—®ç­”æ¨¡æ€æ¡†æµ‹è¯•</h2>
            <p>æµ‹è¯•æ‰€æœ‰å¼¹çª—å’Œæ“ä½œèœå•çš„æ ·å¼</p>
        </div>
        
        <div class="test-content">
            <!-- å¤´éƒ¨æŒ‰é’®æµ‹è¯• -->
            <div class="test-section">
                <h4>1. å¤´éƒ¨é—®å·æŒ‰é’®æµ‹è¯•</h4>
                <div class="demo-header">
                    <span>ä¸“å®¶é—®ç­”</span>
                    <button class="demo-ask-btn" onclick="showQuestionActions()">?</button>
                </div>
                <div class="test-result">
                    <span class="status-indicator success"></span>
                    ç‚¹å‡»é—®å·æŒ‰é’®æ˜¾ç¤ºæ“ä½œèœå•
                </div>
            </div>
            
            <!-- æ“ä½œèœå•æµ‹è¯• -->
            <div class="test-section">
                <h4>2. æ“ä½œèœå•åŠŸèƒ½æµ‹è¯•</h4>
                <button class="test-btn primary" onclick="showQuestionActions()">
                    ğŸ“‹ æ˜¾ç¤ºæ“ä½œèœå•
                </button>
                <button class="test-btn secondary" onclick="testMenuWidth()">
                    ğŸ“ æµ‹è¯•èœå•å®½åº¦
                </button>
                <div class="test-result">
                    <span class="status-indicator success"></span>
                    åŒ…å«ï¼šæå‡ºé—®é¢˜ã€åŠ è½½æ›´å¤šã€æœç´¢é—®é¢˜ã€æˆ‘çš„é—®é¢˜
                </div>
                <div class="test-result">
                    <span class="status-indicator success"></span>
                    å®½åº¦æ§åˆ¶ï¼šæœ€å¤§400pxï¼Œç§»åŠ¨ç«¯è‡ªé€‚åº”ï¼Œä¸è¶…å‡ºå±å¹•è¾¹ç•Œ
                </div>
            </div>
            
            <!-- æé—®æ¨¡æ€æ¡†æµ‹è¯• -->
            <div class="test-section">
                <h4>3. æé—®æ¨¡æ€æ¡†æµ‹è¯•</h4>
                <button class="test-btn primary" onclick="showAskQuestion()">
                    â“ æ˜¾ç¤ºæé—®å¯¹è¯æ¡†
                </button>
                <div class="test-result">
                    <span class="status-indicator success"></span>
                    åŒ…å«ï¼šæ ‡é¢˜ã€æè¿°ã€åˆ†ç±»ã€ç´§æ€¥ç¨‹åº¦ã€å–æ¶ˆã€å‘å¸ƒ
                </div>
            </div>
            
            <!-- æœç´¢åŠŸèƒ½æµ‹è¯• -->
            <div class="test-section">
                <h4>4. æœç´¢åŠŸèƒ½æµ‹è¯•</h4>
                <button class="test-btn secondary" onclick="showQuestionSearch()">
                    ğŸ” æ˜¾ç¤ºæœç´¢å¯¹è¯æ¡†
                </button>
                <div class="test-result">
                    <span class="status-indicator success"></span>
                    åŒ…å«ï¼šå…³é”®è¯è¾“å…¥ã€æœç´¢èŒƒå›´é€‰æ‹©
                </div>
            </div>
            
            <!-- å…¶ä»–åŠŸèƒ½æµ‹è¯• -->
            <div class="test-section">
                <h4>5. å…¶ä»–åŠŸèƒ½æµ‹è¯•</h4>
                <button class="test-btn secondary" onclick="loadMoreQuestions()">
                    ğŸ”„ åŠ è½½æ›´å¤šé—®é¢˜
                </button>
                <button class="test-btn secondary" onclick="showMyQuestions()">
                    ğŸ“ æ˜¾ç¤ºæˆ‘çš„é—®é¢˜
                </button>
                <div class="test-result">
                    <span class="status-indicator success"></span>
                    åŠŸèƒ½å®Œæ•´ï¼Œäº¤äº’æ­£å¸¸
                </div>
            </div>
            
            <div class="test-actions" style="margin-top: 20px; text-align: center;">
                <button onclick="runAllTests()" style="background: #17a2b8; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; margin: 5px;">
                    ğŸ§ª è¿è¡Œæ‰€æœ‰æµ‹è¯•
                </button>
                <button onclick="window.location.href='qa-system.html'" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; margin: 5px;">
                    ğŸ“± æŸ¥çœ‹å®Œæ•´é¡µé¢
                </button>
            </div>
        </div>
    </div>

    <!-- é—®é¢˜æ“ä½œèœå• -->
    <div class="action-sheet" id="questionActionSheet" style="display: none;">
        <div class="action-sheet-content">
            <div class="action-sheet-header">
                <h3>é—®é¢˜æ“ä½œ</h3>
                <button class="close-btn" onclick="hideQuestionActions()">Ã—</button>
            </div>
            <div class="action-sheet-body">
                <div class="action-item" onclick="showAskQuestion(); hideQuestionActions();">
                    <div class="action-icon">â“</div>
                    <div class="action-info">
                        <div class="action-title">æå‡ºé—®é¢˜</div>
                        <div class="action-desc">å‘å¸ƒæ–°çš„æŠ€æœ¯é—®é¢˜ï¼Œå¯»æ±‚ä¸“å®¶è§£ç­”</div>
                    </div>
                </div>
                <div class="action-item" onclick="loadMoreQuestions(); hideQuestionActions();">
                    <div class="action-icon">ğŸ”„</div>
                    <div class="action-info">
                        <div class="action-title">åŠ è½½æ›´å¤šé—®é¢˜</div>
                        <div class="action-desc">è·å–æ›´å¤šç›¸å…³æŠ€æœ¯é—®é¢˜</div>
                    </div>
                </div>
                <div class="action-item" onclick="showQuestionSearch(); hideQuestionActions();">
                    <div class="action-icon">ğŸ”</div>
                    <div class="action-info">
                        <div class="action-title">æœç´¢é—®é¢˜</div>
                        <div class="action-desc">æŒ‰å…³é”®è¯æœç´¢ç›¸å…³é—®é¢˜</div>
                    </div>
                </div>
                <div class="action-item" onclick="showMyQuestions(); hideQuestionActions();">
                    <div class="action-icon">ğŸ“</div>
                    <div class="action-info">
                        <div class="action-title">æˆ‘çš„é—®é¢˜</div>
                        <div class="action-desc">æŸ¥çœ‹æˆ‘å‘å¸ƒçš„æ‰€æœ‰é—®é¢˜</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æé—®æµ®å±‚ -->
    <div class="ask-modal" id="askModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>æå‡ºé—®é¢˜</h3>
                <button class="close-btn" onclick="hideAskQuestion()">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>é—®é¢˜æ ‡é¢˜</label>
                    <input type="text" placeholder="ç®€æ´æ˜ç¡®åœ°æè¿°æ‚¨çš„é—®é¢˜" class="form-input">
                </div>
                <div class="form-group">
                    <label>é—®é¢˜æè¿°</label>
                    <textarea placeholder="è¯¦ç»†æè¿°é—®é¢˜èƒŒæ™¯ã€å…·ä½“æƒ…å†µå’ŒæœŸæœ›è§£å†³çš„ç›®æ ‡" class="form-textarea"></textarea>
                </div>
                <div class="form-group">
                    <label>é—®é¢˜åˆ†ç±»</label>
                    <select class="form-select">
                        <option value="">é€‰æ‹©åˆ†ç±»</option>
                        <option value="5g">5Gç½‘ç»œ</option>
                        <option value="cloud">äº‘è®¡ç®—</option>
                        <option value="edge">è¾¹ç¼˜è®¡ç®—</option>
                        <option value="iot">ç‰©è”ç½‘</option>
                        <option value="security">ç½‘ç»œå®‰å…¨</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ç´§æ€¥ç¨‹åº¦</label>
                    <div class="urgency-options">
                        <label class="radio-option">
                            <input type="radio" name="urgency" value="low">
                            <span>ä¸€èˆ¬</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="urgency" value="medium">
                            <span>è¾ƒæ€¥</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="urgency" value="high">
                            <span>ç´§æ€¥</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="cancel-btn" onclick="hideAskQuestion()">å–æ¶ˆ</button>
                <button class="submit-btn" onclick="submitQuestion()">å‘å¸ƒé—®é¢˜</button>
            </div>
        </div>
    </div>

    <script src="scripts/common.js"></script>
    <script src="scripts/qa-system.js"></script>
    <script>
        function runAllTests() {
            const results = [];
            
            // æµ‹è¯•1: æ£€æŸ¥CSSæ ·å¼åŠ è½½
            const hasQAStyles = Array.from(document.styleSheets).some(sheet => 
                sheet.href && sheet.href.includes('qa-system.css')
            );
            results.push(`CSSæ ·å¼åŠ è½½: ${hasQAStyles ? 'âœ… æ­£å¸¸' : 'âŒ å¼‚å¸¸'}`);
            
            // æµ‹è¯•2: æ£€æŸ¥DOMå…ƒç´ 
            const hasActionSheet = document.getElementById('questionActionSheet') !== null;
            const hasAskModal = document.getElementById('askModal') !== null;
            results.push(`æ“ä½œèœå•å…ƒç´ : ${hasActionSheet ? 'âœ… å­˜åœ¨' : 'âŒ ç¼ºå¤±'}`);
            results.push(`æé—®æ¨¡æ€æ¡†å…ƒç´ : ${hasAskModal ? 'âœ… å­˜åœ¨' : 'âŒ ç¼ºå¤±'}`);
            
            // æµ‹è¯•3: æ£€æŸ¥JavaScriptå‡½æ•°
            const hasShowFunction = typeof showQuestionActions === 'function';
            const hasHideFunction = typeof hideQuestionActions === 'function';
            const hasAskFunction = typeof showAskQuestion === 'function';
            results.push(`æ˜¾ç¤ºæ“ä½œèœå•å‡½æ•°: ${hasShowFunction ? 'âœ… å­˜åœ¨' : 'âŒ ç¼ºå¤±'}`);
            results.push(`éšè—æ“ä½œèœå•å‡½æ•°: ${hasHideFunction ? 'âœ… å­˜åœ¨' : 'âŒ ç¼ºå¤±'}`);
            results.push(`æ˜¾ç¤ºæé—®å¯¹è¯æ¡†å‡½æ•°: ${hasAskFunction ? 'âœ… å­˜åœ¨' : 'âŒ ç¼ºå¤±'}`);
            
            alert('ğŸ§ª æ¨¡æ€æ¡†æµ‹è¯•ç»“æœï¼š\n\n' + results.join('\n'));
        }
        
        // æµ‹è¯•èœå•å®½åº¦
        function testMenuWidth() {
            showQuestionActions();

            setTimeout(() => {
                const actionSheet = document.getElementById('questionActionSheet');
                const actionSheetContent = actionSheet.querySelector('.action-sheet-content');

                if (actionSheetContent) {
                    const rect = actionSheetContent.getBoundingClientRect();
                    const screenWidth = window.innerWidth;
                    const contentWidth = rect.width;
                    const leftMargin = rect.left;
                    const rightMargin = screenWidth - rect.right;

                    const isWithinBounds = leftMargin >= 0 && rightMargin >= 0;
                    const widthPercentage = ((contentWidth / screenWidth) * 100).toFixed(1);

                    const results = [
                        `å±å¹•å®½åº¦: ${screenWidth}px`,
                        `èœå•å®½åº¦: ${contentWidth.toFixed(0)}px (${widthPercentage}%)`,
                        `å·¦è¾¹è·: ${leftMargin.toFixed(0)}px`,
                        `å³è¾¹è·: ${rightMargin.toFixed(0)}px`,
                        `è¾¹ç•Œæ£€æŸ¥: ${isWithinBounds ? 'âœ… æ­£å¸¸' : 'âŒ è¶…å‡ºè¾¹ç•Œ'}`,
                        `æœ€å¤§å®½åº¦é™åˆ¶: ${contentWidth <= 400 ? 'âœ… ç¬¦åˆ' : 'âŒ è¶…å‡º400px'}`
                    ];

                    alert('ğŸ“ èœå•å®½åº¦æµ‹è¯•ç»“æœï¼š\n\n' + results.join('\n'));
                } else {
                    alert('âŒ æ— æ³•æ‰¾åˆ°æ“ä½œèœå•å…ƒç´ ');
                }
            }, 500);
        }

        // æ¨¡æ‹Ÿæäº¤é—®é¢˜å‡½æ•°
        function submitQuestion() {
            alert('âœ… é—®é¢˜æäº¤åŠŸèƒ½æ­£å¸¸ï¼\nï¼ˆè¿™æ˜¯æµ‹è¯•ç¯å¢ƒçš„æ¨¡æ‹Ÿæäº¤ï¼‰');
            hideAskQuestion();
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ§ª ä¸“å®¶é—®ç­”æ¨¡æ€æ¡†æµ‹è¯•é¡µé¢å·²åŠ è½½');
            console.log('âœ… æ‰€æœ‰æ ·å¼å’ŒåŠŸèƒ½å·²å°±ç»ª');
        });
    </script>
</body>
</html>
